<!DOCTYPE html>
<html>
	<head>
		<title>Mortgage Calculator</title>
	</head>
	<body>
		<script>
			function createTable() {

				var principal = document.getElementById("principal").value;
				var apr = document.getElementById("apr").value;
				var paymentAmount = parseInt(document.getElementById("payment-amount").value);
			

				var endingBalance = 0;
				var counter = 0;
				while(principal > 0) {

					var monthlyInterest = principal* ( (apr / 12) / 100);
					principal = principal - (paymentAmount + monthlyInterest);

					if((principal) < 0) {
						paymentAmount = principal + monthlyInterest;
						principal = 0;
						endingBalance = 0
					}
					
					else if(principal < paymentAmount) {
						paymentAmount = paymentAmount - principal;
					}
					else {
						endingBalance = principal + monthlyInterest - paymentAmount;
					}
					
					appenedCells(principal, monthlyInterest, paymentAmount, endingBalance);
					printColumns(principal, monthlyInterest, paymentAmount, endingBalance);
					counter++;
                    
				}
				var h2 = document.getElementById("p");
				h2.appendChild(document.createTextNode(counter));
				console.log(counter);
			}
			function appenedCells(principal, monthlyInterest, paymentAmount, endingBalance) {
				var table = document.getElementById("data-table");
				var tr = document.createElement("tr");

				var tdPrincipal = document.createElement("td");
				var text = document.createTextNode(principal.toFixed(2));
				tdPrincipal.appendChild(text);

				var tdMonthly = document.createElement("td");
				var text = document.createTextNode(monthlyInterest.toFixed(2));
				tdMonthly.appendChild(text);

				var tdPayment = document.createElement("td");
				var text = document.createTextNode(paymentAmount.toFixed(2));
				tdPayment.appendChild(text);

				var tdEnding = document.createElement("td");
				var text = document.createTextNode(endingBalance.toFixed(2));
				tdEnding.appendChild(text);

				tr.appendChild(tdPrincipal);
				tr.appendChild(tdMonthly);
				tr.appendChild(tdPayment);
				tr.appendChild(tdEnding);
				
				table.appendChild(tr);
			}
			function printColumns(principal, monthlyInterest, paymentAmount, endingBalance) {
				console.log("starting, interest ammout, payment, ending balance")
				console.log(principal, monthlyInterest, paymentAmount, endingBalance);
			}
		
		</script>
		<table border='0'>
			<tr>
				<td>Principal:</td><td><input type='text' id="principal"></td>
			</tr>
			<tr>
				<td>Annual Interest:</td><td><input type='text' id="apr"></td>
			</tr>
			<tr>
				<td>Payment Amount:</td><td><input type='text' id="payment-amount"></td>
			</tr>
			<tr>
				<td></td><td><input type='button' value='Compute Mortgage' onclick="createTable()"></td>
			</tr>
		</table>
		<table border='1' id="data-table">
			<tr>
				<th>Starting Principal</th>
				<th>Interest Amount</th>
				<th>Payment</th>
				<th>Ending Balance</th>
			</tr>
			
            
		</table>
		<p id="p"></p>
	
	</body>
</html>
